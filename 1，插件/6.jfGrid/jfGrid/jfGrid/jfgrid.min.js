(function(e){e.jfGrid=e.jfGrid||{};e.extend(e.jfGrid,{render:function(b){var a=b[0].dfop;b.html("");b.addClass("jfgrid-layout");e.jfGrid.renderHead(b);e.jfGrid.renderBorder(b);e.jfGrid.renderLeft(b);e.jfGrid.renderScorllArea(b);e.jfGrid.renderPageBarinit(b);e.jfGrid.renderFooterrow(b);e.jfGrid.renderToolBar(b);b.append('<div class="jfgrid-move-line" id="jfgrid_move_line_'+b[0].dfop.id+'"  ></div>');b.append('<div class="jfgrid-nodata-img" id="jfgrid_nodata_img_'+b[0].dfop.id+'"  ></div>');b.append('<div class="jfgrid-loading" id="jfgrid_loading_'+
b[0].dfop.id+'"  ><div class="bg"></div><div class="img">\u6b63\u5728\u62fc\u547d\u52a0\u8f7d\u5217\u8868\u6570\u636e\u2026</div></div>');b.on("mousedown",e.jfGrid.bindmdown);b.on("click",e.jfGrid.bindClick);b.mousemove(e.jfGrid.bindmmove);b.on("mouseover",e.jfGrid.bindmover);a.rowdatas&&!a.url&&(a.isEidt&&0==a.rowdatas.length&&a.rowdatas.push({}),e.jfGrid.renderData(b));b.css({"min-height":a.minheight});0<a.height&&b.css({height:a.height})},renderHead:function(b){var a=b[0].dfop;a._headWidth=0;a._leftWidth=
0;a._headHeight=0;a._colModel=[];a._colFrozenModel=[];for(var c=e('<div class="jfgrid-head" id="jfgrid_head_'+a.id+'" ></div>'),d=e('<div class="jfgrid-border" id="jfgrid_border_'+a.id+'" ></div>'),f=e('<div class="jfgrid-border-col" id="jfgrid_border_col_'+a.id+'" ></div>'),g=a.headData.length,h=0;h<g;h++){var k=a.headData[h],n=k.frozen?a._leftWidth:a._headWidth;k.height=28;var l=e('<div class="jfgrid-head-cell jfgrid-heed-rownum_0" path="'+h+'" >'+(k.label||"")+"</div>");k.obj=l;k.path=h;k.children?
k.frozen?e.jfGrid.renderSubHead(f,k,a,a._leftWidth,1,!0,h):e.jfGrid.renderSubHead(c,k,a,a._headWidth,1,!1,h):(l.attr("jfgrid-heed-cellrender","ok"),l.append('<div class="jfgrid-heed-sort"><i class="fa fa-caret-up"></i><i class="fa fa-caret-down"></i></div>'),l.append('<div class="jfgrid-heed-move"></div>'),k.frozen?a._colFrozenModel[a._colFrozenModel.length]=k:a._colModel[a._colModel.length]=k,k.type="datacol");k.left=n;l.css({width:(k.width||100)+"px","text-align":k.align||"left",left:n+"px"});a._headHeight=
a._headHeight>k.height?a._headHeight:k.height;k.frozen?(a._leftWidth+=k.width,f.append(l)):(a._headWidth+=k.width,c.append(l))}if(28<a._headHeight)for(c.find('.jfgrid-heed-rownum_0[jfgrid-heed-cellrender="ok"]').css({height:a._headHeight+"px","line-height":a._headHeight-1+"px"}),f.find('.jfgrid-heed-rownum_0[jfgrid-heed-cellrender="ok"]').css({height:a._headHeight+"px","line-height":a._headHeight-1+"px"}),h=0;h<g;h++)k=a.headData[h],k.children&&k.height<a._headHeight&&(k.children?e.jfGrid.renderSubHeadToo(k.children,
a._headHeight-k.height):k.obj.css({height:a._headHeight-k.height+28+"px","line-height":a._headHeight-k.height+27+"px"}));d.append(f);b.append(d);b.append(c)},renderSubHead:function(b,a,c,d,f,g,h){a.width=0;for(var k=a.children,n=k.length,l=28,q=0;q<n;q++){var m=k[q];m.height=28;m.parent=a;var p=e('<div class="jfgrid-head-cell jfgrid-heed-rownum_'+f+'" path="'+h+"."+q+'" >'+(m.label||"")+"</div>");m.obj=p;m.path=q;m.children?e.jfGrid.renderSubHead(b,m,c,d+a.width,f+1,g,h+"."+q):(p.attr("jfgrid-heed-cellrender",
"ok"),p.append('<div class="jfgrid-heed-sort"><i class="fa fa-caret-up"></i><i class="fa fa-caret-down"></i></div>'),p.append('<div class="jfgrid-heed-move"></div>'),g?(m.frozen=!0,c._colFrozenModel[c._colFrozenModel.length]=m):c._colModel[c._colModel.length]=m,m.type="datacol");m.left=d+a.width;p.css({width:(m.width||100)+"px","text-align":m.align||d,left:d+a.width+"px",top:28*f+"px"});a.width+=m.width;l=m.height>l?m.height:l;b.append(p)}28<l&&b.find(".jfgrid-heed-rownum_"+f+'[jfgrid-heed-cellrender="ok"]').css({height:l+
"px","line-height":l-1+"px"});a.height+=l},renderSubHeadToo:function(b,a){for(var c=b.length,d=0;d<c;d++){var f=b[d].obj;b[d].children?e.jfGrid.renderSubHeadToo(b[d].children,a):f.css({height:a+b[d].height+"px","line-height":b[d].height+a-1+"px"})}},renderBorder:function(b){var a=b[0].dfop,c=b.find("#jfgrid_border_"+a.id),d=b.find("#jfgrid_head_"+a.id),f=0;if(a.isShowNum){var g=e('<div class="jfgrid-border-cell jfgrid-border-num"></div>');c.prepend(g);f+=30}a.isMultiselect&&(g=e('<div class="jfgrid-border-cell jfgrid-border-cb"><input role="checkbox" id="jfgrid_all_cb_'+
a.id+'" type="checkbox"></div>').css("left",f+"px").css("line-height",a._headHeight-1+"px"),c.prepend(g),f+=30);a.isSubGrid&&(g=e('<div class="jfgrid-border-cell jfgrid-border-sub"></div>').css("left",f+"px"),c.prepend(g),f+=30);a._borderLeftPadding=f;a._leftWidth+=f;c.css({width:a._leftWidth+"px",height:a._headHeight+"px","padding-left":f+"px"});d.css({width:a._headWidth+"px",height:a._headHeight+"px",left:a._leftWidth+"px"});b.css({"padding-left":a._leftWidth+"px","padding-top":a._headHeight+"px"})},
renderLeft:function(b){var a=b[0].dfop,c=e('<div class="jfgrid-left" id="jfgrid_left_'+a.id+'" ></div>');c.css({width:a._leftWidth+"px",top:a._headHeight+"px"});b.append(c)},renderScorllArea:function(b){var a=b[0].dfop,c=e('<div class="jfgrid-scrollarea" id="jfgrid_scrollarea_'+a.id+'" ><div class="jfgrid-scrollarea-content" id="jfgrid_scrollarea_content_'+a.id+'"  style="width:'+a._headWidth+'px;" ></div></div>');b.append(c);c.mCustomScrollbar({axis:"xy",setLeft:0,callbacks:{whileScrolling:function(){var a=
e(this.mcs.content)[0].jfGridDfop;a&&(e("#jfgrid_left_"+a.id).css("top",a._headHeight+this.mcs.top+"px"),e("#jfgrid_head_"+a.id).css("left",a._leftWidth+this.mcs.left+"px"),e("#jfgrid_statistics_"+a.id).css("left",a._leftWidth+this.mcs.left+"px"))},onOverflowYNone:function(a){this.mcs&&(a=e(this.mcs.content)[0].jfGridDfop,e("#jfgrid_left_"+a.id).css("top",a._headHeight+"px"))},onOverflowXNone:function(a){this.mcs&&(a=e(this.mcs.content)[0].jfGridDfop,e("#jfgrid_head_"+a.id).css("left",a._leftWidth+
"px"),e("#jfgrid_statistics_"+a.id).css("left",a._leftWidth+"px"))},onUpdate:function(){if(this.mcs){var a=e(this.mcs.content)[0].jfGridDfop;e("#jfgrid_scrollarea_"+a.id).mCustomScrollbar("scrollTo","left",{scrollInertia:0,timeout:0})}}}});c.find("#jfgrid_scrollarea_content_"+a.id).parent()[0].jfGridDfop=a;a=null},renderPageBarinit:function(b){var a=b[0].dfop;if(a.isPage&&a.url){b.css({"padding-bottom":"35px"});var c=e('<div class="jfgrid-page-bar" id="jfgrid_page_bar_'+a.id+'"><div class="jfgrid-page-bar-info" >\u65e0\u663e\u793a\u6570\u636e</div><ul class="pagination pagination-sm" id="jfgrid_page_bar_num_'+
a.id+'" ></ul></div>');b.append(c);c.find("#jfgrid_page_bar_num_"+a.id).on("click",e.jfGrid.reloadPage)}},renderPageBar:function(b){var a=b[0].dfop;b=e("#jfgrid_page_bar_"+a.id);var c=b.find("#jfgrid_page_bar_num_"+a.id),d="";if(0==a.rowdatas.length)a="\u65e0\u663e\u793a\u6570\u636e";else{var f=a.pageparam,g=(f.page-1)*f.rows+1,a="\u663e\u793a\u7b2c "+g+" - "+(g+a.rowdatas.length-1)+" \u6761\u8bb0\u5f55  <span>|</span> \u68c0\u7d22\u5230 "+f.records+" \u6761\u8bb0\u5f55";if(1<f.total){var h=f.page-
6,h=0>h?0:h,g=h+10;g>f.total&&(g=f.total);10>g-h&&(h=g-10);for(h=0>h?0:h;h<g;h++)d+='<li><a href="javascript:void(0);" class=" pagebtn '+(h+1==f.page?"active":"")+'" >'+(h+1)+"</a></li>"}}c.html(d);b.find(".jfgrid-page-bar-info").html(a)},renderFooterrow:function(b){var a=b[0].dfop;a.footerrow&&!a.isPage&&(b.css({"padding-bottom":"29px"}),a=e('<div class="jfgrid-footerrow" id="jfgrid_footerrow_'+a.id+'"></div>'),b.append(a))},renderToolBar:function(b){var a=b[0].dfop;if(a.isEidt){var c=e('<div class="jfgrid-toolbar" id="jfgrid_toolbar_'+
a.id+'"></div>'),d=e('<span><i class="fa fa-plus"></i></span>'),f=e('<span><i class="fa fa-minus"></i></span>');d.on("click",function(){a.rowdatas.push({});e.jfGrid.renderData(b)});f.on("click",function(){var c={},d=!1;b.find(".jfgrid_selected_"+a.id+"[datapath]").each(function(){var a=e(this).attr("datapath");c[a]="1";d=!0});if(d){for(var f=[],n=0,l=a.rowdatas.length;n<l;n++)c[n]||f.push(a.rowdatas[n]);0==f.length&&f.push({});a.rowdatas=f;e.jfGrid.renderData(b)}else top.learun.alert.warning("\u8bf7\u9009\u62e9\u9700\u8981\u5220\u9664\u7684\u884c!")});
c.append(d);c.append(f);b.append(c)}},renderStatistics:function(b){var a=b[0].dfop;if(a.isStatistics){var c=b.find("#jfgrid_footerrow_"+a.id);b=c.find("#jfgrid_statistics_"+a.id);0==b.length&&(b=e('<div class="jfgrid-statistics" id="jfgrid_statistics_'+a.id+'" ></div>'),c.append(b),b.css({width:a._headWidth+"px",left:a._leftWidth+"px"}));b.html("");for(var c=-1,d,f=0,g=a._colModel.length;f<g;f++){var h=a._colModel[f],k=0;if(h.statistics){-1==c&&(c=0,d&&d.html("\u5408\u8ba1:"));d=0;for(var n=a.rowdatas.length;d<
n;d++){var l=a.rowdatas[d];void 0!=l[h.name]&&null!=l[h.name]&&""!=l[h.name]&&(k+=parseFloat(l[h.name]))}}d=e('<div class="jfgrid-data-cell"  colname="'+h.name+'" style="width:'+h.width+"px;text-align:"+h.align+';" ></div>');h.statistics&&(d.html(k),d.attr("title",h.label));b.append(d)}}},renderStatisticsOne:function(b,a){var c=b[0].dfop;if(c.isStatistics){b=b.find("#jfgrid_statistics_"+c.id);for(var d=0,e=0,g=c.rowdatas.length;e<g;e++){var h=c.rowdatas[e];void 0!=h[a]&&null!=h[a]&&""!=h[a]&&(d+=
parseFloat(h[a]))}b.find('[colname="'+a+'"]').html(d)}},reload:function(b){var a=b[0].dfop;a.rowdatas=[];a.isPage?(a.pageparam.page=1,a.pageparam.records=0,a.pageparam.total=0,a.param.pagination=JSON.stringify(a.pageparam),e.jfGrid.ajaxLoad(b,a.url,a.param,function(c){200==c.code?(a.rowdatas=c.data.rows,a.pageparam.page=c.data.page,a.pageparam.records=c.data.records,a.pageparam.total=c.data.total):(a.rowdatas=[],a.pageparam.page=1,a.pageparam.records=0,a.pageparam.total=0);e.jfGrid.renderData(b);
if(a.onRenderComplete)a.onRenderComplete(c.data.rows)})):e.jfGrid.ajaxLoad(b,a.url,a.param,function(c){a.rowdatas=200==c.code?c.data:[];e.jfGrid.renderData(b);if(a.onRenderComplete)a.onRenderComplete(a.rowdatas)})},reloadPage:function(b){var a=e(this),c=e("#"+a.attr("id").replace("jfgrid_page_bar_num_","")),d=c[0].dfop;b=e(b.target||b.srcElement);if(b.hasClass("pagebtn")){var f=parseInt(b.text());f!=d.pageparam.page&&(a.find(".active").removeClass("active"),b.addClass("active"),d.pageparam.page=f,
d.param.pagination=JSON.stringify(d.pageparam),e.jfGrid.ajaxLoad(c,d.url,d.param,function(a){200==a.code&&(d.rowdatas=a.data.rows,d.pageparam.page=a.data.page,d.pageparam.records=a.data.records,d.pageparam.total=a.data.total);e.jfGrid.renderData(c)}))}},renderData:function(b){var a=b[0].dfop;a.isPage?(e.jfGrid.renderRowData(b,a.rowdatas),e.jfGrid.renderPageBar(b)):a.isTree?("tree"!=a.datatype&&(a.rowdatas=e.jfGrid.listTotree(a.rowdatas,a.parentId,a.mainId,a)),e.jfGrid.renderTreeRowData(b,a.rowdatas)):
e.jfGrid.renderRowData(b,a.rowdatas);e.jfGrid.renderStatistics(b)},renderRowData:function(b,a){var c=b[0].dfop,d=b.find("#jfgrid_left_"+c.id),f=b.find("#jfgrid_scrollarea_content_"+c.id),g=b.find("#jfgrid_nodata_img_"+c.id);g.hide();var h;c.reloadSelected&&!c.isMultiselect&&(h=e.jfGrid.getSelectedRow(b));d.html("");f.html("");a=a||[];for(var k=a.length,n=0;n<k;n++){var l=a[n],q=null,m="rownum_"+c.id+"_"+n;d.append('<div class="jfgrid-data-cell jfgrid-hide-cell" rownum="'+m+'"  datapath="'+n+'" ></div>');
if(c.isShowNum){var p=e('<div class="jfgrid-data-cell jfgrid-tool-cell" rownum="'+m+'" colname="jfgrid_rownum"  >'+(n+1)+"</div>");d.append(p);q=p}c.isMultiselect&&(p="",c.multiselectfield&&1==parseInt(l[c.multiselectfield])&&(p="checked"),p=e('<div class="jfgrid-data-cell jfgrid-tool-cell" rownum="'+m+'" colname="jfgrid_multiselect" ><input role="checkbox" type="checkbox" '+p+" ></div>"),d.append(p),q=p);c.isSubGrid&&(p=e('<div class="jfgrid-data-cell jfgrid-tool-cell" rownum="'+m+'" colname="jfgrid_subGrid"><i class="fa fa-plus jfgrid_expend" rownum="'+
m+'" ></i></div>'),d.append(p),q=p);for(var w=0,u=c._colFrozenModel.length;w<u;w++)p=e('<div class="jfgrid-data-cell" rownum="'+m+'"  colname="'+c._colFrozenModel[w].name+'" style="width:'+c._colFrozenModel[w].width+"px;text-align:"+c._colFrozenModel[w].align+';"  title="'+(l[c._colFrozenModel[w].name]||"")+'" ></div>'),w==u-1&&(q=p),e.jfGrid.getCellHtml(c._colFrozenModel[w],l,c,p,n),d.append(p);q&&q.addClass("jfgrid-data-cell-last");q=0;for(w=c._colModel.length;q<w;q++)p=e('<div class="jfgrid-data-cell" rownum="'+
m+'" colname="'+c._colModel[q].name+'" style="width:'+c._colModel[q].width+"px;text-align:"+c._colModel[q].align+';" title="'+(l[c._colModel[q].name]||"")+'"  ></div>'),q==w-1&&p.addClass("jfgrid-data-cell-last"),e.jfGrid.getCellHtml(c._colModel[q],l,c,p,n),f.append(p);c.reloadSelected&&!c.isMultiselect&&h&&l[c.mainId]==h[c.mainId]&&b.find('.jfgrid-data-cell[rownum="'+m+'"]').addClass("jfgrid-head-cell-selected").addClass("jfgrid_selected_"+c.id)}0==k?g.show():c.isAutoHeight&&(a=28*k,d=b.css("padding-top"),
c.footerrow&&!c.isPage&&(a=parseInt(a)+29),b.css({height:parseInt(a)+parseInt(d)+2}))},renderTreeRowData:function(b,a){function c(a,h,m){for(var l=0,q=a.length;l<q;l++){var u=a[l],y=e('<div class="jfgrid-data-cell-expend" style="width:'+16*h+'px;" ></div>');u.jfgrid_rownum=n;var x="rownum_"+d.id+"_"+n,t=null;f.append('<div class="jfgrid-data-cell jfgrid-hide-cell"  rownum="'+x+'"  datapath="'+m+l+'" ></div>');if(d.isShowNum){var r=e('<div class="jfgrid-data-cell jfgrid-tool-cell" rownum="'+x+'" colname="jfgrid_rownum"  >'+
(n+1)+"</div>");f.append(r);t=r}d.isMultiselect&&(r="",d.multiselectfield&&1==parseInt(u[d.multiselectfield])&&(r="checked"),r=e('<div class="jfgrid-data-cell jfgrid-tool-cell" rownum="'+x+'" colname="jfgrid_multiselect" ><input role="checkbox" type="checkbox" '+r+" ></div>"),f.append(r),t=r);d.isSubGrid&&(r=e('<div class="jfgrid-data-cell jfgrid-tool-cell" rownum="'+x+'" colname="jfgrid_subGrid"><i class="fa fa-plus jfgrid_expend" rownum="'+x+'" ></i></div>'),f.append(r),t=r);for(var v=0,z=d._colFrozenModel.length;v<
z;v++)r=e('<div class="jfgrid-data-cell" rownum="'+x+'"  colname="'+d._colFrozenModel[v].name+'" style="width:'+d._colFrozenModel[v].width+"px;text-align:"+d._colFrozenModel[v].align+';"  title="'+(u[d._colFrozenModel[v].name]||"")+'" >'+(u[d._colFrozenModel[v].name]||"")+"</div>"),e.jfGrid.getCellHtml(d._colFrozenModel[v],u,d,r,l),0==v&&r.prepend(y),v==z-1&&(t=r),f.append(r);t&&t.addClass("jfgrid-data-cell-last");t=0;for(v=d._colModel.length;t<v;t++)r=e('<div class="jfgrid-data-cell" rownum="'+x+
'" colname="'+d._colModel[t].name+'" style="width:'+d._colModel[t].width+"px;text-align:"+d._colModel[t].align+';" title="'+(u[d._colModel[t].name]||"")+'"  >'+(u[d._colModel[t].name]||"")+"</div>"),e.jfGrid.getCellHtml(d._colModel[t],u,d,r,l),0==t&&0==d._colFrozenModel.length&&r.prepend(y),t==v-1&&r.addClass("jfgrid-data-cell-last"),g.append(r);d.reloadSelected&&!d.isMultiselect&&k&&u[d.mainId]==k[d.mainId]&&b.find('.jfgrid-data-cell[rownum="'+x+'"]').addClass("jfgrid-head-cell-selected").addClass("jfgrid_selected_"+
d.id);n++;0<u.jfGrid_ChildRows.length&&(y.append('<i class="fa fa-caret-down jfgrid-data-cell-expendi"></i>'),c(u.jfGrid_ChildRows,h+1,m+l+"."))}}var d=b[0].dfop,f=b.find("#jfgrid_left_"+d.id),g=b.find("#jfgrid_scrollarea_content_"+d.id),h=b.find("#jfgrid_nodata_img_"+d.id),k;d.reloadSelected&&!d.isMultiselect&&(k=e.jfGrid.getSelectedRow(b));var n=0;h.hide();f.html("");g.html("");a=a||[];0<a.length?c(a,1,""):h.show();d=null},renderPage:function(b){e("#jfgrid_page_bar_"+b.id);b._pagination&&1<b._pagination.total&&
(e('<li title="\u4e0a\u4e00\u9875" ><a href="#" aria-label="\u4e0a\u4e00\u9875"><span aria-hidden="true">&laquo;</span></a></li>'),e('<li title="\u4e0b\u4e00\u9875"><a href="#" aria-label="\u4e0b\u4e00\u9875"><span aria-hidden="true">&raquo;</span></a></li>'))},getCellHtml:function(b,a,c,d,f){var g="",h=a[b.name];if(b.editType)switch(b.editType){case "input":g=e('<input  type="text" class="form-control" />').val(h||"");g.css({"text-align":b.align});g.on("input propertychange",function(){var d=e(this);
a[b.name]=d.val();b.statistics&&e.jfGrid.renderStatisticsOne(e("#"+c.id),b.name);b.editOp&&b.editOp.callback&&(b.editOp.callback(f,a),e.jfGrid.renderData(e("#"+c.id)),e('[rownum="rownum_'+c.id+"_"+f+'"][colname="'+b.name+'"]>input').focus())});d.html(g);b.formatter&&b.formatter(h,a,c,d);break;case "label":g=e('<span class="form-label" >'+(h||"")+"</span>");g.css({"text-align":b.align});d.html(g);break;case "select":g=e('<div class="form-select" >'+(h||"")+'<i class="fa fa-ellipsis-h"></i></div>');
g.css({"text-align":b.align});g.find(".fa-ellipsis-h")[0]._node=b;g.find(".fa-ellipsis-h").on("click",function(){console.log("cbb");var b=e(this)[0]._node;console.log(b);e.jfGrid.layer({html:'<div class="jfgird-select"><div class="jfgird-select-tool"><div class="jfgird-select-tool-item"><input id="jfgird_select_keyword" style="width:200px;" type="text" class="form-control" placeholder="\u8bf7\u8f93\u5165\u8981\u67e5\u8be2\u5173\u952e\u5b57"></div><div class="jfgird-select-tool-item"><a id="jfgird_select_search" class="btn btn-primary btn-sm"><i class="fa fa-search"></i>&nbsp;\u67e5\u8be2</a></div></div><div id="jfgird_select"></div></div>',
width:b.editOp.width||400,height:b.editOp.height||400},function(d){d.find("#jfgird_select").jfGrid({headData:b.editOp.colData,url:b.editOp.url,onRenderComplete:function(a){b.editOp.rowdatas=a},onSelectRow:function(h){b.editOp.callback&&b.editOp.callback(h,f,a,b.editOp.selectData);d.remove();e.jfGrid.renderData(e("#"+c.id))}});b.editOp.rowdatas?d.find("#jfgird_select").jfGridSet("refreshdata",{rowdatas:b.editOp.rowdatas}):d.find("#jfgird_select").jfGridSet("reload",{param:b.editOp.param});e("#jfgird_select_search").on("click",
function(){var a=[],c=e("#jfgird_select_keyword").val();if(c){for(var d=0,f=b.editOp.rowdatas.length;d<f;d++)for(var h=b.editOp.rowdatas[d],g=0,k=b.editOp.colData.length;g<k;g++)if(-1!=h[b.editOp.colData[g].name].indexOf(c)){a.push(h);break}e("#jfgird_select").jfGridSet("refreshdata",{rowdatas:a})}else e("#jfgird_select").jfGridSet("refreshdata",{rowdatas:b.editOp.rowdatas})})})});d.html(g);break;case "checkbox":g=e('<div style="position: absolute;top: 0;left: 0;width: 100%;height: 100%;background: #fff;" ><input  type="checkbox" style="margin:0;margin-top:7px;" /></div>');
1!=h&&"1"!=h||g.find("input").trigger("click");g.find("input").on("click",function(){e(this).is(":checked")?a[b.name]=1:a[b.name]=0});d.html(g);break;case "layerselect":g=e('<div class="form-select" >'+(h||"")+'<i class="fa fa-ellipsis-h"></i></div>'),g.css({"text-align":b.align}),g.find(".fa-ellipsis-h").on("click",function(){b.formatter(h,a,c,d)}),d.html(g)}else if(b.formatter)g=b.formatter(h,a,c,d),d.html(g);else if(b.formatterAsync)b.formatterAsync(function(a){d.html(a||"")},h,a,c,d);else{g=h;
if(null==h||void 0==h||"null"==h||"undefined"==h)g="";d.html(g)}},bindClick:function(b){var a=e(this),c=a[0].dfop,d=e(b.target||b.srcElement);c.isHeadWidhChange?(e.jfGrid.moveHeadWidth(c,!1),c.isHeadWidhChange=!1):d.hasClass("jfgrid-head-cell")?e.jfGrid.sortCol(d,c):d.hasClass("jfgrid_expend")&&d.parent().hasClass("jfgrid-data-cell")||d.hasClass("jfgrid-data-cell")&&0<d.find(".jfgrid_expend").length?e.jfGrid.expandSubGrid(d,c):d.hasClass("jfgrid-data-cell-expendi")?e.jfGrid.expandTree(d,c):d.hasClass("jfgrid-data-cell")||
0<d.parents(".jfgrid-data-cell").length?(e.jfGrid.selectRow(a,d,c),b.stopPropagation()):d.attr("id")=="jfgrid_all_cb_"+c.id&&e.jfGrid.selectAllRow(a,d,c)},bindmdown:function(b){var a=e(this)[0].dfop,c=e(b.target||b.srcElement);if(c.hasClass("jfgrid-heed-move")){var d=c.parent().attr("path"),c=e("#jfgrid_move_line_"+a.id);a._currentMoveCell=e.jfGrid.getHeadCell(d,a.headData);a._currentMoveCell.pageX=b.pageX;a._currentMoveLeft=0;a._currentMoveCell.frozen?a._currentMoveLeft=a._borderLeftPadding+a._currentMoveCell.left+
a._currentMoveCell.width:(b=parseInt(e("#jfgrid_head_"+a.id).css("left").replace(/px/g,"")),a._currentMoveLeft=b+a._currentMoveCell.left+a._currentMoveCell.width);a._currentMoveWidth=a._currentMoveCell.width;c.css("left",a._currentMoveLeft+"px");c.show();a.isHeadWidhChange=!0}},bindmmove:function(b){var a=e(this)[0].dfop;a.isHeadWidhChange&&e.jfGrid.moveHeadWidth(a,!0,b.pageX)},bindmover:function(b){var a=e(this);a.find(".jfgrid-data-cell-over").removeClass("jfgrid-data-cell-over");b=e(b.target||
b.srcElement);if(b.hasClass("jfgrid-data-cell")||0<b.parents(".jfgrid-data-cell").length){var c=b.attr("rownum");c||(c=b.parents(".jfgrid-data-cell").attr("rownum"));a.find('[rownum="'+c+'"]').addClass("jfgrid-data-cell-over")}},moveHeadWidth:function(b,a,c){var d=e("#jfgrid_move_line_"+b.id);a?(a=b._currentMoveCell.width+(c-b._currentMoveCell.pageX),a=40>a?40:a,c=b._currentMoveLeft+(a-b._currentMoveCell.width),b._currentMoveWidth=a,d.css("left",c+"px")):(b._currentMoveWidth!=b._currentMoveCell.width&&
(a=b._currentMoveWidth-b._currentMoveCell.width,b._currentMoveCell.width=b._currentMoveWidth,b._currentMoveCell.obj.css("width",b._currentMoveCell.width+"px"),c=b._currentMoveCell,e.jfGrid.refreshHead(c.frozen,b,b._currentMoveCell.parent,c,a)),d.hide())},getHeadCell:function(b,a){b=b.split(".");for(var c=0,d=b.length;c<d;c++){if(c==d-1)return a[b[c]];a=a[b[c]].children}},refreshHead:function(b,a,c,d,f){function g(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];d.left+=f;d.obj.css("left",d.left+"px");
d.children&&g(d.children)}}for(;c;){d=d.path+1;for(var h=c.children.length;d<h;d++){var k=c.children[d];k.left+=f;k.obj.css("left",k.left+"px");k.children&&g(k.children)}c.width+=f;c.obj.css("width",c.width+"px");d=c;c=c.parent}d=d.path+1;for(h=a.headData.length;d<h;d++)k=a.headData[d],k.frozen==b&&(k.left+=f,k.obj.css("left",k.left+"px"),k.children&&g(k.children));c=e("#"+a.id);d=c.find("#jfgrid_head_"+a.id);b?(b=c.find("#jfgrid_border_"+a.id),h=c.find("#jfgrid_left_"+a.id),a._leftWidth+=f,c.css("padding-left",
a._leftWidth+"px"),b.css("width",a._leftWidth+"px"),h.css("width",a._leftWidth+"px"),d.css("left",a._leftWidth+"px")):(a._headWidth+=f,d.css("width",a._headWidth+"px"),b=c.find("#jfgrid_scrollarea_content_"+a.id),b.css("width",a._headWidth-10+"px"),0>f&&(c.css("width","10000px"),e("#jfgrid_scrollarea_"+a.id).mCustomScrollbar("update"),c.css("width","100%")),b.css("width",a._headWidth+"px"),e("#jfgrid_scrollarea_"+a.id).mCustomScrollbar("update"));c.find('.jfgrid-data-cell[colname="'+a._currentMoveCell.name+
'"]').css("width",a._currentMoveCell.width+"px")},selectRow:function(b,a,c){var d=a,f=a.attr("rownum");f||(d=a.parents(".jfgrid-data-cell"),f=d.attr("rownum"));var g=".jfgrid_selected_"+c.id;c.isMultiselect?"checkbox"==a.attr("role")?d.hasClass("jfgrid-head-cell-selected")?(b.find(g+'[rownum="'+f+'"]').removeClass("jfgrid-head-cell-selected").removeClass("jfgrid_selected_"+c.id),e("#jfgrid_all_cb_"+c.id).is(":checked")&&(c._cancelallcb=!0,e("#jfgrid_all_cb_"+c.id).trigger("click"))):b.find('[rownum="'+
f+'"]').addClass("jfgrid-head-cell-selected").addClass("jfgrid_selected_"+c.id):b.find('.jfgrid-tool-cell[rownum="'+f+'"] input[role="checkbox"]').trigger("click"):(b.find(g).removeClass("jfgrid-head-cell-selected").removeClass("jfgrid_selected_"+c.id),b.find('[rownum="'+f+'"]').addClass("jfgrid-head-cell-selected").addClass("jfgrid_selected_"+c.id));if(c.onSelectRow)c.onSelectRow(e.jfGrid.getSelectedRow(b))},selectAllRow:function(b,a,c){a.is(":checked")?b.find('.jfgrid-tool-cell [role="checkbox"]').not(":checked").trigger("click"):
(c._cancelallcb||b.find('.jfgrid-tool-cell [role="checkbox"]:checked').trigger("click"),c._cancelallcb=!1)},sortCol:function(b,a){b=b.attr("path");b=e.jfGrid.getHeadCell(b,a.headData);if("datacol"==b.type&&b.sort&&a.isPage){var c;a.sortcell?(a.sortcell.obj.find(".jfgrid-heed-sort").hide(),b==a.sortcell?(c=a.sortcell.obj.find(".jfgrid-heed-sort .active"),c.removeClass("active"),c.hasClass("fa-caret-up")?(a.sortcell.obj.find(".jfgrid-heed-sort .fa-caret-down").addClass("active"),c=!1):(a.sortcell.obj.find(".jfgrid-heed-sort .fa-caret-up").addClass("active"),
c=!0),a.sortcell.obj.find(".jfgrid-heed-sort").show()):(b.obj.find(".jfgrid-heed-sort .active").removeClass("active"),b.obj.find(".jfgrid-heed-sort .fa-caret-up").addClass("active"),b.obj.find(".jfgrid-heed-sort").show(),c=!0)):(b.obj.find(".jfgrid-heed-sort .active").removeClass("active"),b.obj.find(".jfgrid-heed-sort .fa-caret-up").addClass("active"),b.obj.find(".jfgrid-heed-sort").show(),c=!0);a.sortcell=b;var d=e("#"+a.id);a.pageparam.sidx=b.name;a.pageparam.sord=c?"ASC":"DESC";e.jfGrid.reload(d)}},
expandSubGrid:function(b,a){var c=b;b.hasClass("jfgrid_expend")||(c=b.find(".jfgrid_expend"));b=b.attr("rownum");var d=e("#jfgrid_scrollarea_content_"+a.id),f=e("#jfgrid_left_"+a.id),d=d.find('.jfgrid-data-cell-last[rownum="'+b+'"]'),f=f.find('.jfgrid-data-cell-last[rownum="'+b+'"]');if(0<f.next().find(".jfgrid_chlidgird").length)f.next().remove(),d.next().remove(),c.removeClass("fa-minus"),c.addClass("fa-plus");else{c.removeClass("fa-plus");c.addClass("fa-minus");var c="jfgrid_chlidgird_content_"+
a.id+"_"+b,g='<div class="jfgrid-subgird-cell" for-rownum="rowId" style="width:'+a._leftWidth+"px;height:"+a.subGridHeight+'px;" >',g=g+('<div class="jfgrid_chlidgird" style="width:'+(e("#jfgrid_scrollarea_"+a.id).width()+a._leftWidth)+"px;padding-left:"+a._borderLeftPadding+'px;" ><div class="jfgrid_subgird_left" style="width:'+a._borderLeftPadding+'px;" ></div>');f.after(g+('<div class="jfgrid-chlidgird-content" id="'+c+'"></div>')+"</div></div>");d.after('<div class="jfgrid-data-cell" for-rownum="rowId" style="width:'+
a._headWidth+"px;height:"+a.subGridHeight+'px;" ></div>');a.subGridRowExpanded&&(b=e("#"+a.id).find('.jfgrid-hide-cell[rownum="'+b+'"]').attr("datapath"),b=e.jfGrid.getRowDataByPath(a,b),a.subGridRowExpanded(c,b))}},expandTree:function(b,a){function c(a,b){for(var d=a[0].dfop,e=0,f=b.length;e<f;e++)a.find('[rownum="'+("rownum_"+d.id+"_"+b[e].jfgrid_rownum)+'"]').not(".jfgrid-hide-cell").show(),0<b[e].jfGrid_ChildRows.length&&!b[e]._isclosed&&c(a,b[e].jfGrid_ChildRows)}function d(b,c){for(var e=0,
f=c.length;e<f;e++)b.find('[rownum="'+("rownum_"+a.id+"_"+c[e].jfgrid_rownum)+'"]').hide(),0<c[e].jfGrid_ChildRows.length&&!c[e]._isclosed&&d(b,c[e].jfGrid_ChildRows)}var f=e("#"+a.id),g=b.parent().parent().attr("rownum"),g=f.find('.jfgrid-hide-cell[rownum="'+g+'"]').attr("datapath"),g=e.jfGrid.getRowDataByPath(a,g);b.hasClass("fa-caret-down")?(g._isclosed=!0,d(f,g.jfGrid_ChildRows),b.removeClass("fa-caret-down"),b.addClass("fa-caret-right")):(g._isclosed=!1,c(f,g.jfGrid_ChildRows),b.removeClass("fa-caret-right"),
b.addClass("fa-caret-down"))},listTotree:function(b,a,c,d){function e(a,b){b=h[b]||[];for(var f=0,g=b.length;f<g;f++){var k=b[f];k.jfGrid_ChildRows=[];e(k.jfGrid_ChildRows,k[c]);a.push(k);d._maprowdatas[k[c]]=k}}var g=[],h={},k={},n={};d._maprowdatas={};b=b||[];for(var l=0,q=b.length;l<q;l++){var m=b[l];k[m[c]]=1;h[m[a]]=h[m[a]]||[];h[m[a]].push(m);1==k[m[a]]?delete n[m[a]]:n[m[a]]=1;1==n[m[c]]&&delete n[m[c]]}for(var p in n)e(g,p);return g},treeTolist:function(b){function a(b){for(var d=0,e=b.length;d<
e;d++){var h={},k;for(k in b[d])"jfGrid_ChildRows"!=k&&(h[k]=b[d][k]);c.push(h);0<b[d].jfGrid_ChildRows.length&&a(b[d].jfGrid_ChildRows)}}var c=[];a(b);return c},getSelectedRow:function(b){var a=b[0].dfop,c,d=[];b.find(".jfgrid_selected_"+a.id+"[datapath]").each(function(){var b=e(this).attr("datapath");b&&(c=e.jfGrid.getRowDataByPath(a,b),d.push(c))});return 1<d.length?d:c},getRowDataByPath:function(b,a){a=a.split(".");b=b.rowdatas;for(var c=null,d=0,e=a.length;d<e;d++){c=b[a[d]];if(!c)return null;
b=c.jfGrid_ChildRows}return c},addTreeRow:function(b,a){var c=a.row;c.jfGrid_ChildRows=[];a.rowdatas=a.rowdatas||[];a._maprowdatas=a._maprowdatas||{};a._maprowdatas[c[a.parentId]]?a._maprowdatas[c[a.parentId]].jfGrid_ChildRows.push(c):a.rowdatas.push(c);a._maprowdatas[c[a.mainId]]=c;e.jfGrid.renderTreeRowData(b,a.rowdatas)},addRow:function(b,a){a=b[0].dfop;a.rowdatas.push(a.row);e.jfGrid.renderRowData(b,a.rowdatas)},updateRow:function(b,a){var c=e.jfGrid.getSelectedRow(b);c&&(e.extend(c,a.row),!a.isPage&&
a.isTree?e.jfGrid.renderTreeRowData(b,a.rowdatas):e.jfGrid.renderRowData(b,a.rowdatas))},removeRow:function(b,a){var c=e(b.find(".jfgrid-head-cell-selected[datapath]")[0]).attr("datapath");if(c){for(var c=c.split("."),d=a.rowdatas,f=0,g=c.length;f<g;f++)if(f==g-1){d.splice(c[f],1);break}else d=d[c[f]].jfGrid_ChildRows;!a.isPage&&a.isTree?e.jfGrid.renderTreeRowData(b,a.rowdatas):e.jfGrid.renderRowData(b,a.rowdatas)}},layer:function(b,a){var c=e('<div class="jfgrid-layer"><div class="jfgrid-layer-bg"></div><div class="jfgrid-layer-content" style="width:'+
b.width+"px;height:"+b.height+"px;margin:-"+b.height/2+"px 0 0 -"+b.width/2+'px;">'+b.html+'<span id="jfgridlayerremove" class="jfgrid-layer-remove"  title="\u5173\u95ed"><i class="fa fa-times"></i></span></div></div>');e("body").append(c);c.find("#jfgridlayerremove").on("click",function(){c.remove()});a&&a(c)},loading:function(b,a){b=e("#jfgrid_loading_"+b[0].dfop.id);a?b.show():b.hide()},ajaxLoad:function(b,a,c,d){e.jfGrid.loading(b,!0);e.ajax({url:a,data:c,type:"GET",dataType:"json",async:!0,cache:!1,
success:function(a){d(a);e.jfGrid.loading(b,!1)},error:function(a,b,c){d({code:500})},beforeSend:function(){},complete:function(){e.jfGrid.loading(b,!1)}})},print:function(b){function a(b,c){var d=b.length;e.each(b,function(b,g){f[c]=f[c]||e("<tr></tr>");b=e("<th>"+g.label+"</th>");if(g.children&&0<g.children.length){var h=a(g.children,c+1);d=d+h-1;b.attr("colspan",h)}h=parseInt(g.obj.css("height"))/28;b.attr("rowspan",h);b.css("text-align",g.align);f[c].append(b)});return d}var c=b[0].dfop;console.log(c);
var d=e('<table border="1" style=""></table>'),f=[];a(c.headData,0);e.each(f,function(a,b){d.append(b)});e.each(c.rowdatas,function(a,f){var g=e("<tr></tr>");b.find('[rownum="rownum_'+c.id+"_"+a+'"]').each(function(){var a=e(this),b=a.attr("colname");b&&"jfgrid_rownum"!=b&&"jfgrid_multiselect"!=b&&"jfgrid_subGrid"!=b&&(b=e("<td>"+a.html()+"</td>"),b.css("text-align",a.css("text-align")),g.append(b))});d.append(g)});c=null;return d}});e.fn.jfGrid=function(b){var a=e(this);if(!a[0]||a[0].dfop)return a;
var c=a.attr("id");if(null==c||void 0==c||""==c)c="jfgrid"+(new Date).getTime(),a.attr("id",c);var d={url:"",param:{},rowdatas:[],datatype:"array",headData:[],isShowNum:!0,isMultiselect:!1,multiselectfield:"",isSubGrid:!1,subGridRowExpanded:!1,subGridHeight:300,onSelectRow:!1,onRenderComplete:!1,isPage:!1,pageparam:{rows:50,page:1,sidx:"",sord:"",records:0,total:0},sidx:"",sord:"ASC",isTree:!1,mainId:"id",parentId:"parentId",reloadSelected:!1,isAutoHeight:!1,footerrow:!1,isEidt:!1,minheight:0,height:0,
isStatistics:!1};b&&e.extend(d,b);d.id=c;a[0].dfop=d;d.pageparam.sidx=d.sidx;d.pageparam.sord=d.sord;e.jfGrid.render(a);return a};e.fn.jfGridSet=function(b,a){var c=e(this),d=c.attr("id");if(null==d||void 0==d||""==d)return null;d=c[0].dfop;if(!d)return null;a&&e.extend(d,a);switch(b){case "reload":e.jfGrid.reload(c);break;case "refreshdata":e.jfGrid.renderData(c);break;case "addRow":!d.isPage&&d.isTree?e.jfGrid.addTreeRow(c,d):e.jfGrid.addRow(c,d);break;case "updateRow":e.jfGrid.updateRow(c,d);break;
case "removeRow":e.jfGrid.removeRow(c,d)}};e.fn.jfGridGet=function(b){var a=e(this),c=a.attr("id");if(null==c||void 0==c||""==c)return null;var d=a[0].dfop;if(!d)return null;switch(b){case "rowdata":return e.jfGrid.getSelectedRow(a);case "rowdatas":return d.rowdatas;case "rowdatasByArray":return e.jfGrid.treeTolist(d.rowdatas);case "settingInfo":return d;case "showData":var f=[];e.each(d.rowdatas,function(b,d){f[b]={};a.find('[rownum="rownum_'+c+"_"+b+'"]').each(function(){var a=e(this),c=a.attr("colname");
c&&"jfgrid_rownum"!=c&&(f[b][c]=a.text())})});return f}d=null};e.fn.jfGridValue=function(b){var a=e(this),c=a.attr("id");if(null==c||void 0==c||""==c||!a[0].dfop)return null;if(a=e.jfGrid.getSelectedRow(a)){var d="";return 0<a.length?(e.each(a,function(a,c){""!=d&&(d+=",");d+=c[b]||""}),d):a[b]||""}return""};e.fn.jfGridPrint=function(){var b=e(this);return e.jfGrid.print(b)}})(window.jQuery);